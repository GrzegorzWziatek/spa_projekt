"use strict";var app=angular.module("carpoolingApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]);app.config(["$routeProvider","$httpProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/blog",{templateUrl:"views/blog.html",controller:"BlogCtrl",controllerAs:"blog"}).when("/blogItem/:id",{templateUrl:"views/blogitem.html",controller:"BlogitemCtrl",controllerAs:"blogItem"}).when("/user",{templateUrl:"views/user.html",controller:"UserCtrl",controllerAs:"user"}).when("/userEdit",{templateUrl:"views/useredit.html",controller:"UsereditCtrl",controllerAs:"userEdit"}).when("/routes",{templateUrl:"views/routes.html",controller:"RoutesCtrl",controllerAs:"routes"}).when("/route/:id",{templateUrl:"views/route.html",controller:"RouteCtrl",controllerAs:"route"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).when("/logout",{templateUrl:"views/logout.html",controller:"LogoutCtrl",controllerAs:"logout"}).otherwise({redirectTo:"/"}),b.defaults.withCredentials=!0}]),app.run(["userService",function(a){a.isLogged()}]),angular.module("carpoolingApp").controller("MainCtrl",["userService","$scope",function(a,b){a.isLogged(),console.log(b)}]),angular.module("carpoolingApp").service("myservice",function(){this.myFunction=function(){console.log("myFunction")}}),angular.module("carpoolingApp").service("userService",["$rootScope","$http",function(a,b){var c=window.location.protocol+"//"+window.location.hostname;this.login=function(d,e){b({method:"POST",url:c+":5000/user/login",data:d}).then(function(b){"OK"===b.data.status?(a.userId=b.data.data.user,a.userLogin=b.data.data.login,a.userLogged=!0,e(!0)):(window.alert(b.data.data.message),e(!1))},function(){window.alert("An error occured, please try again"),e(!1)})},this.isLogged=function(){return a.checkedLogin?a.userLogged:(b({method:"GET",url:c+":5000/user/logged"}).then(function(b){var c=b.data.logged,d=b.data.uid;return a.userId=d,a.userLogged=c,a.checkedLogin=!0,c},function(){return!1}),!1)},this.logout=function(){b({method:"GET",url:c+":5000/user/logout"}).then(function(){a.userId="",a.userLogged=!1,a.userLogin=""},function(){window.alert("An error occured, please try again")})}}]),angular.module("carpoolingApp").controller("BlogCtrl",["$scope","blogService","$location",function(a,b,c){alert("DUPA"),a.blogs=function(d){b.get_blogs(function(b){b&&(a.blogS=b),c.path("/blog")})}}]),angular.module("carpoolingApp").controller("BlogitemCtrl",["$scope","$routeParams",function(a,b){a.id=b.id,window.alert(a.id)}]),angular.module("carpoolingApp").controller("UserCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("UsereditCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("RoutesCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("RouteCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("LoginCtrl",["$scope","userService","$location",function(a,b,c){b.isLogged()&&c.path("/"),a.validate=function(d){if(d.$valid){var e={email:a.email,password:a.password};b.login(e,function(a){a&&c.path("/")})}}}]),angular.module("carpoolingApp").controller("RegisterCtrl",["$scope","userService","registerService","$location",function(a,b,c,d){b.isLogged()&&d.path("/"),a.validate=function(b){if(b.$valid){var e={email:a.email,password:a.password,login:a.login,car:a.car,plates:a.plates,desc:a.desc};c.register(e,function(a){a&&d.path("/")})}}}]),angular.module("carpoolingApp").controller("LogoutCtrl",["$location","userService",function(a,b){b.logout(),a.path("/")}]),angular.module("carpoolingApp").service("registerService",["$http","$rootScope",function(a,b){var c=window.location.protocol+"//"+window.location.hostname;this.register=function(d,e){a({method:"POST",url:c+":5000/user/register",data:d}).then(function(a){"OK"===a.data.status?(console.log(a),b.userId=a.data.data.user,b.userLogin=a.data.data.login,b.userLogged=!0,e(!0)):(window.alert("An error occured, please try again: "+a.data.data.message),e(!1))},function(){window.alert("An error occured, please try again"),e(!1)})}}]),angular.module("carpoolingApp").run(["$templateCache",function(a){a.put("views/blog.html",'<body ng-app="carpoolingApp" ng-controller="BlogCtrl"> <div class="row"> <div class="col-s-4" ng-show="blogs(blog)"> <!-- <h1 ng-click="blog.selectTab(\'blog\')" class="push-left">{{blog.title}}</h1> --> </div> <div class="offset-s-4 col-s-4"> <h1 ng-repeat="x in blogS">{{x}}</h1> <!-- <nav role=\'navigation\' class="push-right">\n        <ul name="blog" ng-show="blogs(blog)">\n          <li><a href="#" ng-click="blog.blogS">See All Posts</a></li>\n        </ul>\n      </nav>--> </div> </div> </body> <!--\n  <body ng-app="blogApp">\n\n  <div ng-controller="BlogController as blog">\n      <div class="topbar">\n        <div class="container">\n          <div class="row">\n            <div class="col-s-4">\n              <h1 ng-click="blog.selectTab(\'blog\')" class="push-left">{{blog.title}}</h1>\n            </div>\n            <div class="offset-s-4 col-s-4">\n              <nav role=\'navigation\' class="push-right">\n                <ul>\n                  <li><a href="#" ng-click="blog.selectTab(\'blog\')">See All Posts</a></li> //\n                  <li><a href="#" ng-click="blog.selectTab(\'new\')">Add New Post</a></li>\n                </ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n\n\n\n      </div>\n\n\n      <div class="content">\n        <div class="container">\n          <div class="row">\n            <ul class="post-grid" ng-show="blog.isSelected(\'blog\')">\n          <li ng-repeat="post in blog.posts" class="col-s-4" ng-class="{ \'reset-s\' : $index%3==0 }" ng-click="blog.selectTab($index)" >\n            <h3>{{post.title}}</h3>\n            <p>{{post.body[0] | limitTo:70}}...</p>\n            <p class="fa fa-comment push-left"> {{post.comments.length}}\n            </p>\n            <p class="fa fa-heart push-right"> {{post.likes}}\n            </p>\n          </li>\n        </ul>\n        <div class="post" ng-repeat="post in blog.posts" ng-show="blog.isSelected($index)">\n          <div>\n\n            <h2>{{post.title}}</h2>\n            <img src="{{post.image}}" ng-show="{{post.image}}"/>\n            <cite>by {{post.author}} on {{post.createdOn | date}}</cite>\n            <div class="post-body">\n             <p ng-repeat="paragraph in post.body">\n               {{paragraph}}\n             </p>\n            </div>\n\n            <div class="comments" ng-controller="CommentController as commentCtrl">\n              <button class="fa fa-heart" ng-click="post.likes = post.likes+1"> {{post.likes}}</button>\n              <h3>Comments</h3>\n              <ul>\n               <li ng-repeat="comment in post.comments">\n                 "{{comment.body}}"\n                 <cite>- <b>{{comment.author}}</b></cite>\n               </li>\n              </ul>\n              <form name="commentForm" ng-submit="commentForm.$valid && commentCtrl.addComment(post)" novalidate>\n\n\n                <h4>Add Comment</h4>\n                  <textarea ng-model="commentCtrl.comment.body" cols="30" rows="10" required></textarea>\n                <label for="">by:</label>\n                  <input type="text" ng-model="commentCtrl.comment.author" required placeholder="Name"/>\n\n                  <input type="submit" value="Submit" />\n                </form>\n            </div>\n        </div>\n      </div>\n        <div class="post" ng-show="blog.isSelected(\'new\')">\n          <h2>Add New Post</h2>\n\n          <form name="postForm" ng-submit=" blog.addPost()" novalidate>\n                  <h4>Title</h4>\n                  <input type="text" ng-model="blog.post.title"/>\n                  <h4>Body</h4>\n                  <textarea ng-model="blog.post.body" ng-list="/\\n/" rows="10"></textarea>\n                  <label for="">Featured Image URL</label>\n                  <input type="text" ng-model="blog.post.image" placeholder="http://placekitten.com/g/2000/600" />\n                  <label for="">by:</label>\n                  <input type="text" ng-model="blog.post.author" placeholder="Author Name" required/>\n\n                  <input type="submit" value="Submit" />\n                </select></form>\n\n            </div>\n\n          </div>\n        </div>\n\n    </div>\n  </div>\n\n\n</body>\n-->'),a.put("views/blogitem.html","<p>This is the blogItem view.</p>"),a.put("views/login.html",'<div class="row"> <div class="col-md-6" style="float:none; margin; 0 auto"> <h3>Login</h3> <form name="loginForm" ng-submit="validate(loginForm)"> <div class="form-group"> <label class="control-label">Email</label> <input type="email" name="email" ng-model="email" ng-required="required" required class="form-control"> <span class="error" ng-show="loginForm.email.$error.required"> Required!</span> <span class="error" ng-show="loginForm.email.$error.email"> Not valid email!</span> </div> <div class="form-group"> <label class="control-label">Password</label> <input type="password" name="password" ng-model="password" ng-required="required" required class="form-control"> <span class="error" ng-show="loginForm.password.$error.required"> Required!</span> </div> <hr> <div class="form-group"> <button type="submit" class="btn btn-primary"> Login </button> </div> </form> </div> </div>'),a.put("views/logout.html","<p>This is the logout view.</p>"),a.put("views/main.html","main app"),a.put("views/register.html",'<div class="row"> <div class="col-md-6" style="float:none; margin; 0 auto"> <h3>Register</h3> <form name="regiForm" ng-submit="validate(regiForm)"> <div class="form-group"> <label class="control-label">Email</label> <input type="email" name="email" ng-model="email" ng-required="required" required class="form-control"> <span class="error" ng-show="regiForm.email.$error.required"> Required!</span> <span class="error" ng-show="regiForm.email.$error.email"> Not valid email!</span> </div> <div class="form-group"> <label class="control-label">Password</label> <input type="password" name="password" ng-model="password" ng-required="required" required class="form-control"> <span class="error" ng-show="regiForm.password.$error.required"> Required!</span> </div> <div class="form-group"> <label class="control-label">Login</label> <input type="text" name="login" ng-model="login" ng-required="required" required class="form-control"> <span class="error" ng-show="regiForm.login.$error.required"> Required!</span> </div> <div class="form-group"> <label class="control-label">Car</label> <input type="text" name="car" ng-model="car" ng-required="required" required class="form-control"> <span class="error" ng-show="regiForm.car.$error.required"> Required!</span> </div> <div class="form-group"> <label class="control-label">Plates</label> <input type="text" name="plates" ng-model="plates" ng-required="required" required class="form-control"> <span class="error" ng-show="regiForm.plates.$error.required"> Required!</span> </div> <div class="form-group"> <label class="control-label">Description</label> <input type="text" name="desc" ng-model="desc" ng-required="required" required class="form-control"> <span class="error" ng-show="regiForm.desc.$error.required"> Required!</span> </div> <div class="form-group"> <button type="submit" class="btn btn-primary"> Register </button> </div> </form> </div> </div>'),a.put("views/route.html","<p>This is the route view.</p>"),a.put("views/routes.html","<p>This is the routes view.</p>"),a.put("views/user.html","<p>This is the user view.</p>"),a.put("views/useredit.html","<p>This is the userEdit view.</p>")}]);