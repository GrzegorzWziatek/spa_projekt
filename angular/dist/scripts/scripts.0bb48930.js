"use strict";var app=angular.module("carpoolingApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]);app.config(["$routeProvider","$httpProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/blog",{templateUrl:"views/blog.html",controller:"BlogCtrl",controllerAs:"blog"}).when("/blogItem/:id",{templateUrl:"views/blogitem.html",controller:"BlogitemCtrl",controllerAs:"blogItem"}).when("/user",{templateUrl:"views/user.html",controller:"UserCtrl",controllerAs:"user"}).when("/userEdit",{templateUrl:"views/useredit.html",controller:"UsereditCtrl",controllerAs:"userEdit"}).when("/routes",{templateUrl:"views/routes.html",controller:"RoutesCtrl",controllerAs:"routes"}).when("/route/:id",{templateUrl:"views/route.html",controller:"RouteCtrl",controllerAs:"route"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterCtrl",controllerAs:"register"}).when("/logout",{templateUrl:"views/logout.html",controller:"LogoutCtrl",controllerAs:"logout"}).otherwise({redirectTo:"/"}),b.defaults.withCredentials=!0}]),app.run(["userService",function(a){a.isLogged()}]),angular.module("carpoolingApp").controller("MainCtrl",["userService","$scope",function(a,b){a.isLogged(),console.log(b)}]),angular.module("carpoolingApp").service("myservice",function(){this.myFunction=function(){console.log("myFunction")}}),angular.module("carpoolingApp").service("userService",["$rootScope","$http",function(a,b){var c=window.location.protocol+"//"+window.location.hostname;this.login=function(d,e){b({method:"POST",url:c+":5000/user/login",data:d}).then(function(b){"OK"===b.data.status?(a.userId=b.data.data.user,a.userLogin=b.data.data.login,a.userLogged=!0,e(!0)):(window.alert(b.data.data.message),e(!1))},function(){window.alert("An error occured, please try again"),e(!1)})},this.isLogged=function(){return a.checkedLogin?a.userLogged:(b({method:"GET",url:c+":5000/user/logged"}).then(function(b){var c=b.data.logged,d=b.data.uid;return a.userId=d,a.userLogged=c,a.checkedLogin=!0,c},function(){return!1}),!1)},this.logout=function(){b({method:"GET",url:c+":5000/user/logout"}).then(function(){a.userId="",a.userLogged=!1,a.userLogin=""},function(){window.alert("An error occured, please try again")})}}]),angular.module("carpoolingApp").controller("BlogCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("BlogitemCtrl",["$scope","$routeParams",function(a,b){a.id=b.id,window.alert(a.id)}]),angular.module("carpoolingApp").controller("UserCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("UsereditCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("RoutesCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("RouteCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("carpoolingApp").controller("LoginCtrl",["$scope","userService","$location",function(a,b,c){b.isLogged()&&c.path("/"),a.validate=function(d){if(d.$valid){var e={email:a.email,password:a.password};b.login(e,function(a){a&&c.path("/")})}}}]),angular.module("carpoolingApp").controller("RegisterCtrl",["userService","$location",function(a,b){a.isLogged()&&b.path("/")}]),angular.module("carpoolingApp").controller("LogoutCtrl",["$location","userService",function(a,b){b.logout(),a.path("/")}]),angular.module("carpoolingApp").service("registerService",["$http","$rootScope",function(a,b){var c=window.location.protocol+"//"+window.location.hostname;this.register=function(d,e){a({method:"POST",url:c+":5000/user/register",data:d}).then(function(a){"OK"===a.data.status?(console.log(a),b.userId=a.data.data.user,b.userLogin=a.data.data.login,b.userLogged=!0,e(!0)):(window.alert("An error occured, please try again: "+a.data.data.message),e(!1))},function(){window.alert("An error occured, please try again"),e(!1)})}}]),angular.module("carpoolingApp").run(["$templateCache",function(a){a.put("views/blog.html","<p>This is the blog view.</p>"),a.put("views/blogitem.html","<p>This is the blogItem view.</p>"),a.put("views/login.html",'<div class="row"> <div class="col-md-6" style="float:none; margin; 0 auto"> <h3>Login</h3> <form name="loginForm" ng-submit="validate(loginForm)"> <div class="form-group"> <label class="control-label">Email</label> <input type="email" name="email" ng-model="email" ng-required="required" required class="form-control"> <span class="error" ng-show="loginForm.email.$error.required"> Required!</span> <span class="error" ng-show="loginForm.email.$error.email"> Not valid email!</span> </div> <div class="form-group"> <label class="control-label">Password</label> <input type="password" name="password" ng-model="password" ng-required="required" required class="form-control"> <span class="error" ng-show="loginForm.password.$error.required"> Required!</span> </div> <hr> <div class="form-group"> <button type="submit" class="btn btn-primary"> Login </button> </div> </form> </div> </div>'),a.put("views/logout.html","<p>This is the logout view.</p>"),a.put("views/main.html","main app"),a.put("views/register.html","<p>This is the register view.</p>"),a.put("views/route.html","<p>This is the route view.</p>"),a.put("views/routes.html","<p>This is the routes view.</p>"),a.put("views/user.html","<p>This is the user view.</p>"),a.put("views/useredit.html","<p>This is the userEdit view.</p>")}]);